# ميزة تعطيل/تفعيل العملاء لـ WhatsApp

## نظرة عامة
تم إضافة ميزة جديدة تسمح بتعطيل أو تفعيل العملاء من تلقي رسائل WhatsApp. هذا يساعد في التحكم في من يتلقى التنبيهات والرسائل.

## الميزات الجديدة

### 1. إدارة حالة العميل
- **زر التعطيل/التشغيل**: في صفحة العملاء، يمكنك تعطيل أو تفعيل أي عميل من تلقي رسائل WhatsApp
- **عرض الحالة**: يظهر حالة كل عميل (نشط/معطل) في بطاقة العميل
- **أيقونات واضحة**: أيقونة الباند (🚫) للتعطيل وأيقونة التشيك (✅) للتفعيل

### 2. التحكم في الإرسال
- **الإرسال الجماعي**: يستثني العملاء المعطلين تلقائياً من الإرسال الجماعي
- **الإرسال الفردي**: يمنع إرسال الرسائل للعملاء المعطلين
- **الديون المتأخرة**: يستثني العملاء المعطلين من إرسال تنبيهات الديون المتأخرة

### 3. الإحصائيات المحدثة
- **إحصائيات دقيقة**: تعرض عدد العملاء الذين لديهم رقم WhatsApp نشط فقط
- **تنبيهات ذكية**: تظهر عدد العملاء بدون رقم WhatsApp نشط

## كيفية الاستخدام

### 1. تطبيق Migration قاعدة البيانات
```sql
-- نفذ هذا الكود في Supabase SQL Editor
\i supabase/add_whatsapp_enabled_to_customers.sql
```

### 2. إدارة العملاء
1. اذهب إلى صفحة "العملاء"
2. ابحث عن العميل المطلوب
3. اضغط على زر الباند (🚫) لتعطيل العميل أو زر التشيك (✅) لتفعيله
4. ستظهر رسالة تأكيد للعملية

### 3. مراقبة الإرسال
- في صفحة WhatsApp، ستجد إحصائيات محدثة تعكس العملاء النشطين فقط
- العملاء المعطلين لن يظهرون في قوائم الإرسال
- سيتم عرض "(معطل)" بجانب أسماء العملاء المعطلين في قوائم الاختيار

## الفوائد

### 1. التحكم الكامل
- يمكنك منع إرسال الرسائل لعملاء معينين دون حذف بياناتهم
- سهولة إعادة التفعيل في أي وقت

### 2. تجنب الإزعاج
- منع إرسال رسائل لعملاء لا يريدون التلقي
- تجنب الشكاوى من العملاء

### 3. إدارة أفضل
- تنظيم أفضل لقوائم العملاء
- إحصائيات دقيقة تعكس الواقع

## الترجمات الجديدة

تم إضافة النصوص التالية لدعم الميزة:

### العربية
- `whatsappEnabled`: "نشط لـ WhatsApp"
- `whatsappDisabled`: "معطل لـ WhatsApp"
- `enableCustomer`: "تشغيل العميل"
- `disableCustomer`: "تعطيل العميل"
- `customerEnabled`: "تم تشغيل العميل"
- `customerDisabled`: "تم تعطيل العميل"
- `whatsappStatus`: "حالة WhatsApp"

### الكردية
- `whatsappEnabled`: "چالاک بۆ WhatsApp"
- `whatsappDisabled`: "ناچالاک بۆ WhatsApp"
- `enableCustomer`: "چالاککردنی کڕیار"
- `disableCustomer`: "ناچالاککردنی کڕیار"
- `customerEnabled`: "کڕیار چالاککرا"
- `customerDisabled`: "کڕیار ناچالاککرا"
- `whatsappStatus`: "دۆخی WhatsApp"

## ملاحظات مهمة

1. **الافتراضي**: جميع العملاء الجديد والحاليين نشطون افتراضياً
2. **الأمان**: لا يؤثر تعطيل العميل على بياناته الأخرى
3. **المرونة**: يمكن إعادة التفعيل في أي وقت
4. **الإحصائيات**: تعكس العدد الحقيقي للعملاء النشطين

## استكشاف الأخطاء

### مشكلة: لا يظهر زر التعطيل/التشغيل
**الحل**: تأكد من تطبيق migration قاعدة البيانات

### مشكلة: العملاء المعطلين ما زالوا يتلقون رسائل
**الحل**: تأكد من حفظ التغييرات وإعادة تحميل الصفحة

### مشكلة: الإحصائيات غير دقيقة
**الحل**: انتظر حتى يتم تحديث البيانات (قد يستغرق بضع ثوانٍ)
